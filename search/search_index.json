{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Chat Application \u2013 Overview","text":""},{"location":"#purpose","title":"Purpose","text":"<p>This project is a real-time chat application built as a learning-focused, production-inspired system. The primary goal is to understand and implement real-world backend concepts such as:</p> <ul> <li>Real-time messaging</li> <li>End-to-end encryption</li> <li>Authorization rules</li> <li>Group governance</li> <li>Low-cost, serverless-friendly design</li> </ul> <p>This is not intended to be a feature-complete WhatsApp or Telegram clone.</p>"},{"location":"#target-users","title":"Target Users","text":"<ul> <li>A small number of authenticated users (personal use, friends, known contacts)</li> <li>Users are identified primarily by mobile number</li> <li>The system is not designed for public or anonymous usage</li> </ul>"},{"location":"#core-principles","title":"Core Principles","text":"<ul> <li>Behavior-first design: system behavior is defined before implementation</li> <li>Privacy-first: messages are end-to-end encrypted</li> <li>Low operational cost: suitable for long-term personal hosting</li> <li>Minimal scope: only essential features are included</li> <li>Real-world realism: trade-offs are intentional and documented</li> </ul>"},{"location":"#what-the-system-does","title":"What the System Does","text":"<ul> <li>Enables private one-to-one messaging</li> <li>Supports group messaging with two group models:</li> <li>Admin-based groups</li> <li>Democratic groups with polling for user removal</li> <li>Allows silent blocking in private chats</li> <li>Encrypts all messages end-to-end</li> <li>Uses mobile number\u2013based discovery</li> </ul>"},{"location":"#what-the-system-does-not-do","title":"What the System Does NOT Do","text":"<ul> <li>Voice or video calling</li> <li>Public user discovery</li> <li>Message requests or spam prevention</li> <li>Content moderation</li> <li>Server-side message inspection</li> <li>Backup or cross-device message recovery</li> </ul>"},{"location":"#constraints","title":"Constraints","text":"<ul> <li>Serverless-first mindset</li> <li>Minimal ongoing cost</li> <li>Small, controlled user base</li> <li>No dependence on server-side message content</li> </ul>"},{"location":"#scope-philosophy","title":"Scope Philosophy","text":"<p>This project intentionally prioritizes clarity and correctness of behavior over feature breadth. Some real-world complexities are deferred or excluded to keep the system understandable and maintainable.</p>"},{"location":"behavior/","title":"Chat Application \u2013 Behavioral Specification","text":"<p>This document defines the behavioral rules of the chat application. It intentionally avoids implementation, architecture, or technology details. The goal is to clearly describe how the system behaves from a user and system perspective.</p>"},{"location":"behavior/#1-user-identity-authentication","title":"1. User Identity &amp; Authentication","text":""},{"location":"behavior/#11-user-identity","title":"1.1 User Identity","text":"<ul> <li>Every user has a stable, internal <code>userId</code> that never changes.</li> <li><code>userId</code> is the primary identifier used internally across the system.</li> <li>Usernames are mutable and used only for display purposes.</li> </ul>"},{"location":"behavior/#12-mobile-number","title":"1.2 Mobile Number","text":"<ul> <li>Mobile number is mandatory at signup.</li> <li>Mobile number is:</li> <li>Used for user discovery</li> <li>Used for primary authentication (OTP-based)</li> <li>Mobile number can be changed after verification.</li> </ul>"},{"location":"behavior/#13-email","title":"1.3 Email","text":"<ul> <li>Email is optional at signup.</li> <li>Email can be added later for recovery and reliability.</li> <li>When email is added, it must be verified via OTP.</li> <li>Email is:</li> <li>Used as a secondary OTP delivery channel</li> <li>Used for account recovery</li> <li>Email is not searchable by other users.</li> </ul>"},{"location":"behavior/#14-login-behavior","title":"1.4 Login Behavior","text":"<ul> <li>Login is OTP-based.</li> <li>OTP is sent to:</li> <li>Mobile number (always)</li> <li>Email (only if email is added and verified)</li> <li>The same OTP may be delivered via both channels.</li> <li>If a user does not add an email, they accept the risk of mobile-only access.</li> </ul>"},{"location":"behavior/#2-user-discovery","title":"2. User Discovery","text":"<ul> <li>Any logged-in user can search for another user using exact-match mobile number.</li> <li>If the user exists:</li> <li>They appear in search results</li> <li>Their public profile can be viewed</li> <li>There are no message requests or approval flows.</li> </ul>"},{"location":"behavior/#3-message-privacy-end-to-end-encryption","title":"3. Message Privacy &amp; End-to-End Encryption","text":"<ul> <li>All messages in the system are end-to-end encrypted (E2EE).</li> <li>Message content is encrypted on the sender\u2019s device.</li> <li>Message content is decrypted only on recipient devices.</li> <li>The backend never has access to plaintext message content.</li> </ul>"},{"location":"behavior/#31-server-visibility","title":"3.1 Server Visibility","text":"<p>The server may access: - Sender identity - Chat or group identifier - Message identifiers - Timestamps</p> <p>The server may not access: - Message text - Media content - File names or captions</p> <p>All stored messages are persisted only in encrypted (ciphertext) form.</p>"},{"location":"behavior/#4-private-chats","title":"4. Private Chats","text":""},{"location":"behavior/#41-private-chat-definition","title":"4.1 Private Chat Definition","text":"<ul> <li>A private chat exists between exactly two users.</li> <li>There can be only one private chat per user pair.</li> </ul>"},{"location":"behavior/#42-chat-creation","title":"4.2 Chat Creation","text":"<ul> <li>Opening a chat UI does not create a chat.</li> <li>A private chat is created only when the first message is sent.</li> <li>If no message is ever sent, no chat exists.</li> </ul>"},{"location":"behavior/#43-first-message-flow","title":"4.3 First Message Flow","text":"<ol> <li>User A searches User B and opens chat UI.</li> <li>User A sends the first message.</li> <li>The system:</li> <li>Creates a private chat</li> <li>Stores the encrypted message</li> <li>Delivers the encrypted message to User B</li> <li>User B:</li> <li>Receives a notification</li> <li>Sees the new private chat</li> <li>Can reply immediately</li> </ol>"},{"location":"behavior/#44-ongoing-messaging","title":"4.4 Ongoing Messaging","text":"<ul> <li>Once created, both users can freely message each other.</li> <li>Messages are delivered in real time.</li> <li>The backend routes encrypted payloads without inspecting content.</li> </ul>"},{"location":"behavior/#5-blocking-behavior-silent-block","title":"5. Blocking Behavior (Silent Block)","text":""},{"location":"behavior/#51-blocking-rules","title":"5.1 Blocking Rules","text":"<ul> <li>Either user in a private chat can block the other.</li> <li>Blocking is asymmetric.</li> <li>Blocking applies only to private chats.</li> </ul>"},{"location":"behavior/#52-behavior-after-blocking","title":"5.2 Behavior After Blocking","text":"<p>When User A blocks User B:</p> <p>User A - Does not receive messages from User B. - Receives no notifications from User B. - Chat remains visible and marked as blocked.</p> <p>User B - Can send messages. - Messages appear sent on the client. - Receives no error or notification. - Messages are silently dropped server-side.</p>"},{"location":"behavior/#53-message-handling","title":"5.3 Message Handling","text":"<ul> <li>Messages sent during a block:</li> <li>Are dropped before delivery</li> <li>Are not stored, even in encrypted form</li> <li>Are never delivered later, even if unblocked</li> </ul>"},{"location":"behavior/#54-unblocking","title":"5.4 Unblocking","text":"<ul> <li>When User A unblocks User B:</li> <li>Normal messaging resumes</li> <li>Messages sent during the block are permanently lost</li> </ul>"},{"location":"behavior/#6-groups","title":"6. Groups","text":""},{"location":"behavior/#61-group-creation","title":"6.1 Group Creation","text":"<ul> <li>Any user can create a group.</li> <li>Minimum group size is 2 users.</li> <li>A group exists immediately upon creation, even before any messages are sent.</li> </ul>"},{"location":"behavior/#62-group-types","title":"6.2 Group Types","text":""},{"location":"behavior/#621-normal-group","title":"6.2.1 Normal Group","text":"<ul> <li>One or more admins exist.</li> <li>Admin powers:</li> <li>Add users</li> <li>Remove users</li> <li>Assign admin role</li> <li>Edit group profile</li> </ul> <p>Admin Rules - Multiple admins are allowed. - There is always at least one admin. - If the last admin leaves:   - Admin rights transfer to the next-joined member.</p>"},{"location":"behavior/#622-democratic-group","title":"6.2.2 Democratic Group","text":"<ul> <li>All members have equal privileges.</li> <li>No permanent admin hierarchy.</li> <li>Polling is required only for removing users.</li> <li>All other actions (adding users, editing profile) do not require polling.</li> </ul>"},{"location":"behavior/#7-group-membership-messaging","title":"7. Group Membership &amp; Messaging","text":""},{"location":"behavior/#71-adding-users","title":"7.1 Adding Users","text":"<ul> <li>Users can be added to groups without their consent.</li> </ul>"},{"location":"behavior/#72-messaging","title":"7.2 Messaging","text":"<ul> <li>All group members receive group messages.</li> <li>Blocking does not apply inside groups.</li> <li>Even if two users have blocked each other privately:</li> <li>They still receive each other\u2019s messages in shared groups.</li> <li>Group messages are end-to-end encrypted in the same manner as private messages.</li> </ul>"},{"location":"behavior/#8-polling-democratic-groups-only","title":"8. Polling (Democratic Groups Only)","text":"<ul> <li>Polling is used only for removing a user from the group.</li> <li>Polling is group-wide.</li> <li>No polling is used for:</li> <li>Adding users</li> <li>Editing group profile</li> <li>Messaging</li> </ul>"},{"location":"behavior/#9-scope-notes","title":"9. Scope Notes","text":"<ul> <li>Voice and video calling are out of scope.</li> <li>Message requests and spam prevention are out of scope.</li> <li>Account recovery beyond email fallback is out of scope.</li> <li>Moderation and reporting are out of scope.</li> <li>Server-side message inspection is out of scope.</li> </ul> <p>These decisions are intentional to keep the system:</p> <ul> <li>Low-cost</li> <li>Serverless-friendly</li> <li>Privacy-first</li> <li>Focused on real-time encrypted messaging behavior</li> </ul>"}]}